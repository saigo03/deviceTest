<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rise Note App</title>
    <!-- Vue.js CDNを追加 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>

<body>

    <div id="app">
        <!-- メインコンテンツ -->
        <%# ログイン、ログアウト処理 %>
        <% if user_signed_in? %>
            <%= link_to 'Logout', destroy_user_session_path, method: :delete %>
        <% else %>
            <%= link_to 'Login', new_user_session_path %>
        <% end %>
        
        <main>
            <div class="gazou"><img src="プロフィール画像.png" width="150"></div>
            <div class="raizu">
              <% if user_signed_in? %>
                  <p><%= current_user.email %></p>
                <% else %>
                  <p>You are not logged in.</p>
                <% end %>
            </div>
            <div class="pen"><button @click="goToTop"><img src="ペン.png" width="18"></button></div>
            <div class="henkouSakuzyo">
                <div class="but"><button onclick="パスワード変更.html">パスワードの変更</button></div>
                <div class="but"><button onclick="メールアドレス変更.html">メールアドレスの変更</button></div>
                <div class="but"><button @click="accountDelete">アカウント削除</button></div>
            </div>

            <!-- アカウント削除確認ダイアログ -->
            <div v-if="accountDeleteFlag" class="overlay">
                <div class="button-template-container">
                <div class="text1">
                    <p>{{ confirmationMessage }}</p>
                </div>
                <p v-if="showNoteMessage">アカウントを削除すると、全てのノートも削除されます。</p>
                <div class="button-container">
                    <div class="aka"><button @click="confirmAccountDelete">{{ confirmButtonText }}</button></div>
                    <div class="ao"><button @click="cancelAccountDelete">いいえ</button></div>
                </div>
            </div>
        </main>
    </div>

    <style>
        html,body{
            overflow: hidden;
            margin:0;
        }

        header {
            background-color: rgb(136, 204, 243);
            padding: 10px;
            border-bottom: 1px solid #ccc;
            box-shadow: #3b3939;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .system-name {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-buttons {
            display: flex;
        }
        
        .header-buttons button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            text-decoration: underline; /* 下線を追加 */
            color: #000000;
            padding: 0;
            margin-left: 10px;
        }
        
        .header-buttons button:hover {
            color: #555;
        }

        
        main {
            margin-top: 50px; /* ヘッダーの分だけ下にずらす */
        }

        .henkouSakuzyo{
            height:50vw;
        }

        .gazou{
            display:flex;
            justify-content:center;
        }

        .raizu{
            display:flex;
            justify-content:center;
            font-size:30px;
        }

        .pen{
            display:flex;
            position:relative;
            top: 50%;
            left: 50%;
            transform: translate(5%,-190%);
            margin-top: 20px;
        }

        .pen button{
            border: none;
            background: none;
            cursor: pointer;
        }
        .but{
            display:flex;
            justify-content:center;
            padding: 10px;
            margin:30px;
        }
        .but button{
            background:none;
            border:none;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            font-size: 20px;
        }
        .but button:hover {
            color: #555;
        }

        
        .button-container {
          display: flex;
          position:absolute;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
        }

        .button-container button {
            padding: 5px 10px;
            cursor: pointer;
            background-color: #3498db;
            color: #fff;
            border: none;
            transition: background-color 0.3s, color 0.3s;
            white-space: nowrap; /* テキストの折り返しを防ぐ */
        }
        
        .button-container button:hover {
            background-color: #2980b9;
            color: #fff;
        }
        
        

        .text1{
            color:blue;
            font-size:20px;
        }

        .button-template-container {
            border: 1px solid #000000;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #edeaea;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            height: 200px; /* 縦幅を広げる */
            width: 500px;
        }

        .button-template-container button {
            width: 60%;
            padding: 10px;
            margin-top: 10px; /* ボタン同士の縦幅の間隔 */
            cursor: pointer;
            color: #fff;
            border: none;
            transition: background-color 0.3s, color 0.3s;
        }

        .aka, .ao {
            flex: 1; /* ボタン同士のスペースを均等にする */
            margin: 0 40px; /* ボタン同士の横のマージンを追加 */
        }

        .aka button {
            background-color: #e74c3c;
            width: 150%;
        }

        .ao button{
            background-color:#ccc;
            color:#333;
            width:100% ;
        }

        .aka button:hover, .ao button:hover {
            background-color: #3b3939; /* 赤色の薄いバリエーション */
            color: #fff;
        }

        .overlay {
            background-color: rgba(0, 0, 0, 0.5);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>

    <!-- Vue.jsの処理 -->
    <script>
        new Vue({
            el: '#app',
            data: {
                accountDeleteFlag: false,
                confirmationMessage: "アカウントを削除しますか？",
                showNoteMessage: true,
                confirmButtonText: "はい",
            },
            methods: {
                accountDelete() {
                    this.accountDeleteFlag = true;
                },
                confirmAccountDelete() {
                    // アカウント削除の具体的なロジックをここに追加してください
                    console.log("アカウントが削除されました！");
                    this.confirmationMessage = "本当にアカウントを削除しますか？";
                    this.showNoteMessage = false;
                    this.confirmButtonText = "削除";
                },
                cancelAccountDelete() {
                    this.accountDeleteFlag = false;
                    this.confirmationMessage = "アカウントを削除しますか？";
                    this.showNoteMessage = true;
                    this.confirmButtonText = "はい";
                },
                goToTop() {
                    // Topへの遷移の処理を実装
                    console.log("Topへ移動");
                },
            },
        });
    </script>

</body>

</html>
